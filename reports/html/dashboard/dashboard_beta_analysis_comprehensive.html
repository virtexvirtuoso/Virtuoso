<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Virtuoso Beta Analysis Dashboard</title>
    <style>
        /* Import JetBrains Mono font */
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&display=swap');

        /* Terminal Amber + Navy Blue Theme */
        :root {
            --bg-primary: #0c1a2b;
            --bg-secondary: #0f172a;
            --bg-hero: #0f172a;
            --bg-satellite: #0f172a;
            --bg-header: #0a1525;
            --text-primary: #ffbf00;
            --text-secondary: #b8860b;
            --accent-primary: #ff9900;
            --accent-positive: #ffc107;
            --accent-negative: #ff5722;
            --accent-warning: #ff9900;
            --border-light: #1a2a40;
            --glow-amber: #ffbf00;
            
            /* Signal confidence colors */
            --signal-strong: #ffc107;
            --signal-medium: #ff9900;
            --signal-weak: #ff7043;
            --signal-neutral: #607d8b;
            --signal-negative: #f44336;
        }

        /* Global Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 50%, var(--bg-hero) 100%);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            font-weight: 400;
            font-family: 'JetBrains Mono', 'Courier New', monospace;
        }

        /* Subtle pattern overlay */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 25% 25%, rgba(255, 191, 0, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, rgba(255, 153, 0, 0.05) 0%, transparent 50%);
            background-size: 200px 200px;
            opacity: 0.3;
            z-index: -1;
            pointer-events: none;
        }

        /* Terminal ambient lighting */
        .ambient-glow {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 200px;
            background: linear-gradient(to top, rgba(255, 153, 0, 0.1), transparent);
            z-index: -1;
            pointer-events: none;
        }



        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 2rem 2.5rem;
            border-bottom: 2px solid var(--border-light);
            background: linear-gradient(135deg, var(--bg-header), var(--bg-satellite));
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 rgba(255, 191, 0, 0.3);
            position: relative;
        }

        .header::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, 
                transparent 0%, 
                var(--accent-primary) 25%, 
                var(--accent-positive) 50%, 
                var(--accent-primary) 75%, 
                transparent 100%);
            animation: terminalScan 3s ease-in-out infinite;
        }

        @keyframes terminalScan {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        .terminal-title {
            font-size: 2.4rem;
            color: var(--text-primary);
            margin: 0;
            text-transform: uppercase;
            letter-spacing: 3px;
            font-weight: 700;
            text-shadow: 
                0 0 20px var(--glow-amber),
                0 0 40px var(--glow-amber);
            position: relative;
            font-family: 'JetBrains Mono', monospace;
        }

        .terminal-title::before {
            content: '>>>';
            position: absolute;
            left: -60px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--accent-primary);
            font-size: 1.5rem;
            text-shadow: 0 0 15px var(--accent-primary);
        }

        .terminal-title::after {
            content: '_';
            animation: blink 1s infinite;
            color: var(--accent-primary);
            margin-left: 5px;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        .subtitle {
            font-size: 0.9rem;
            color: var(--accent-positive);
            margin-top: 8px;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: 400;
        }

        .header-controls {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .config-toggle {
            background: linear-gradient(135deg, var(--bg-satellite), var(--bg-header));
            border: 1px solid var(--border-light);
            color: var(--text-primary);
            padding: 0.8rem 1.5rem;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 
                0 4px 15px rgba(255, 153, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            text-transform: uppercase;
            font-weight: 500;
            letter-spacing: 1px;
            font-family: 'JetBrains Mono', monospace;
            position: relative;
            overflow: hidden;
        }

        .config-toggle:hover {
            transform: translateY(-2px);
            box-shadow: 
                0 8px 25px rgba(255, 153, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            border-color: var(--accent-positive);
            background: var(--accent-primary);
            color: var(--bg-primary);
        }

        .real-time-indicator {
            display: flex;
            align-items: center;
            gap: 12px;
            background: linear-gradient(135deg, var(--bg-satellite), var(--bg-header));
            padding: 12px 20px;
            border: 1px solid var(--border-light);
            border-radius: 4px;
            box-shadow: 
                inset 0 2px 4px rgba(0, 0, 0, 0.3),
                0 0 15px rgba(255, 153, 0, 0.2);
        }

        .status-light {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--accent-positive);
            box-shadow: 0 0 15px var(--accent-positive);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        .status-text {
            font-size: 0.85rem;
            color: var(--text-primary);
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .nav-back-link {
            background: linear-gradient(135deg, var(--bg-satellite), var(--bg-header));
            border: 1px solid var(--border-light);
            color: var(--text-secondary);
            padding: 0.8rem 1.5rem;
            border-radius: 4px;
            text-decoration: none;
            transition: all 0.3s ease;
            box-shadow: 
                0 4px 15px rgba(255, 153, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            text-transform: uppercase;
            font-weight: 500;
            letter-spacing: 1px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            display: inline-block;
        }

        .nav-back-link:hover {
            transform: translateY(-2px);
            box-shadow: 
                0 8px 25px rgba(255, 153, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            border-color: var(--accent-positive);
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-positive));
            color: var(--bg-primary);
        }

        /* Main Container */
        .container {
            padding: 2rem 2.5rem;
            max-width: 100%;
            margin: 0 auto;
        }

        /* Dashboard Grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: auto auto auto auto;
            gap: 1.5rem;
            height: calc(100vh - 200px);
        }

        /* Panel Base Styles */
        .panel {
            background: linear-gradient(135deg, var(--bg-hero), var(--bg-satellite));
            border: 1px solid var(--border-light);
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.05);
            position: relative;
            overflow: hidden;
        }

        .panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, var(--accent-primary), var(--accent-positive), var(--accent-primary));
            opacity: 0.6;
        }

        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid rgba(26, 42, 64, 0.5);
        }

        .panel-title {
            font-size: 0.85rem;
            color: var(--text-primary);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-family: 'JetBrains Mono', monospace;
        }

        .panel-count {
            font-size: 0.75rem;
            color: var(--accent-positive);
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Executive Summary Panel */
        .summary-panel {
            grid-column: 1 / 3;
            grid-row: 1;
        }

        .summary-metrics {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .summary-metric {
            text-align: center;
            padding: 1rem;
            background: linear-gradient(135deg, var(--bg-satellite), var(--bg-header));
            border-radius: 8px;
            border: 1px solid var(--border-light);
        }

        .metric-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--accent-positive);
            margin-bottom: 0.5rem;
        }

        .metric-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .beta-gauge {
            width: 100%;
            height: 12px;
            background: var(--bg-primary);
            border-radius: 6px;
            overflow: hidden;
            margin-top: 0.5rem;
            border: 1px solid var(--border-light);
        }

        .beta-gauge-fill {
            height: 100%;
            border-radius: 6px;
            transition: all 0.3s ease;
        }

        /* Performance Chart Panel */
        .performance-panel {
            grid-column: 1 / 3;
            grid-row: 2;
        }

        .chart-container {
            position: relative;
            width: 100%;
            height: 400px;
            background: linear-gradient(135deg, var(--bg-primary), var(--bg-secondary));
            border-radius: 8px;
            border: 1px solid var(--border-light);
            overflow: hidden;
        }

        .chart-canvas {
            width: 100%;
            height: 100%;
            border-radius: 8px;
        }

        .chart-legend {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 1rem;
            margin-top: 1rem;
            font-size: 0.8rem;
            font-family: 'JetBrains Mono', monospace;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 4px;
            border: 1px solid var(--border-light);
        }

        .legend-line {
            width: 20px;
            height: 2px;
            border-radius: 1px;
        }

        /* Beta Coefficient Panel */
        .beta-panel {
            grid-column: 1;
            grid-row: 3;
        }

        .beta-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85rem;
        }

        .beta-table th {
            text-align: left;
            padding: 0.75rem;
            background: var(--bg-satellite);
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 0.7rem;
            border-bottom: 1px solid var(--border-light);
        }

        .beta-table td {
            padding: 0.75rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .beta-table tr:hover {
            background: rgba(255, 191, 0, 0.1);
        }

        .symbol-name {
            font-weight: 600;
            color: var(--accent-positive);
        }

        .beta-value-high { color: var(--signal-strong); }
        .beta-value-medium { color: var(--signal-medium); }
        .beta-value-low { color: var(--signal-weak); }

        /* Correlation Heatmap Panel */
        .correlation-panel {
            grid-column: 2;
            grid-row: 3;
        }

        .heatmap-container {
            position: relative;
            width: 100%;
            height: 300px;
            background: linear-gradient(135deg, var(--bg-primary), var(--bg-secondary));
            border-radius: 8px;
            border: 1px solid var(--border-light);
        }

        /* Alpha Opportunities Panel */
        .alpha-panel {
            grid-column: 1;
            grid-row: 4;
        }

        .alpha-item {
            background: linear-gradient(135deg, var(--bg-satellite), var(--bg-header));
            border-left: 3px solid var(--signal-strong);
            padding: 1rem;
            margin-bottom: 1rem;
            border-radius: 0 6px 6px 0;
            transition: all 0.3s ease;
        }

        .alpha-item:hover {
            transform: translateX(4px);
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
        }

        .alpha-symbol {
            font-weight: 700;
            color: var(--signal-strong);
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
        }

        .alpha-pattern {
            color: var(--accent-primary);
            font-style: italic;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        .alpha-confidence {
            color: var(--text-secondary);
            font-size: 0.8rem;
        }

        /* Trading Insights Panel */
        .insights-panel {
            grid-column: 2;
            grid-row: 4;
        }

        .insight-item {
            margin-bottom: 1rem;
            padding-left: 1.5rem;
            position: relative;
            color: var(--text-primary);
            line-height: 1.6;
        }

        .insight-item::before {
            content: "‚ñ∂";
            position: absolute;
            left: 0;
            color: var(--accent-primary);
            font-size: 0.8rem;
        }

        /* Responsive Design */
        @media (max-width: 1600px) {
            .dashboard-grid {
                gap: 1.2rem;
            }
            .panel {
                padding: 1.5rem;
            }
        }

        @media (max-width: 1400px) {
            .dashboard-grid {
                gap: 1rem;
            }
            .panel {
                padding: 1.2rem;
            }
        }

        @media (max-width: 1200px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
                grid-template-rows: repeat(6, auto);
                gap: 1rem;
            }
            
            .summary-panel { grid-column: 1; grid-row: 1; }
            .performance-panel { grid-column: 1; grid-row: 2; }
            .beta-panel { grid-column: 1; grid-row: 3; }
            .correlation-panel { grid-column: 1; grid-row: 4; }
            .alpha-panel { grid-column: 1; grid-row: 5; }
            .insights-panel { grid-column: 1; grid-row: 6; }
            
            .summary-metrics {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .container {
                padding: 1.5rem;
            }
        }

        @media (max-width: 768px) {
            .summary-metrics {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .container {
                padding: 1rem;
            }
            
            .header {
                padding: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="ambient-glow"></div>
    
    <!-- Header -->
    <div class="header">
        <div>
            <h1 class="terminal-title">VIRTUOSO.BETA.ANALYSIS</h1>
            <div class="subtitle">Comprehensive Bitcoin Correlation & Alpha Analysis</div>
        </div>
        
        <div class="header-controls">
            <a href="dashboard_v10_signal_confluence_matrix.html" class="nav-back-link">‚Üê TRADING DASHBOARD</a>
            <button class="config-toggle">CONFIG</button>
            <div class="real-time-indicator">
                <div class="status-light"></div>
                <span class="status-text">LIVE</span>
            </div>
        </div>
    </div>

    <!-- Main Container -->
    <div class="container">
        <div class="dashboard-grid">
            <!-- Executive Summary Panel -->
            <div class="panel summary-panel">
                <div class="panel-header">
                    <span class="panel-title">EXECUTIVE SUMMARY</span>
                    <span class="panel-count">REAL-TIME ANALYSIS</span>
                </div>
                
                <div class="summary-metrics">
                    <div class="summary-metric">
                        <div class="metric-value" id="symbolsCount">12</div>
                        <div class="metric-label">Assets Analyzed</div>
                    </div>
                    <div class="summary-metric">
                        <div class="metric-value" id="avgBeta">1.245</div>
                        <div class="metric-label">Average Beta</div>
                        <div class="beta-gauge">
                            <div class="beta-gauge-fill" id="betaGaugeFill"></div>
                        </div>
                    </div>
                    <div class="summary-metric">
                        <div class="metric-value" id="avgCorrelation">0.782</div>
                        <div class="metric-label">Avg Correlation</div>
                    </div>
                    <div class="summary-metric">
                        <div class="metric-value" id="alphaOpportunities">7</div>
                        <div class="metric-label">Alpha Opportunities</div>
                    </div>
                    <div class="summary-metric">
                        <div class="metric-value" id="riskLevel">MODERATE</div>
                        <div class="metric-label">Portfolio Risk</div>
                    </div>
                </div>
                
                <div class="market-interpretation" id="marketInterpretation">
                    <!-- Market interpretation will be populated by JavaScript -->
                </div>
            </div>

            <!-- Normalized Performance Chart Panel -->
            <div class="panel performance-panel">
                <div class="panel-header">
                    <span class="panel-title">NORMALIZED PERFORMANCE</span>
                    <span class="panel-count">30-DAY ANALYSIS</span>
                </div>
                
                <div class="chart-container">
                    <canvas id="performanceChart" class="chart-canvas"></canvas>
                </div>
                
                <div class="chart-legend" id="performanceLegend">
                    <!-- Legend will be populated by JavaScript -->
                </div>
            </div>

            <!-- Beta Coefficients Table Panel -->
            <div class="panel beta-panel">
                <div class="panel-header">
                    <span class="panel-title">BETA COEFFICIENTS</span>
                    <span class="panel-count">RANKED BY OPPORTUNITY</span>
                </div>
                
                <table class="beta-table">
                    <thead>
                        <tr>
                            <th>Symbol</th>
                            <th>Beta</th>
                            <th>Correlation</th>
                            <th>Vol Ratio</th>
                            <th>Alpha</th>
                        </tr>
                    </thead>
                    <tbody id="betaTableBody">
                        <!-- Table rows will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>

            <!-- Correlation Heatmap Panel -->
            <div class="panel correlation-panel">
                <div class="panel-header">
                    <span class="panel-title">CORRELATION MATRIX</span>
                    <span class="panel-count">MULTI-TIMEFRAME</span>
                </div>
                
                <div class="heatmap-container">
                    <canvas id="correlationHeatmap" class="chart-canvas"></canvas>
                </div>
            </div>

            <!-- Alpha Opportunities Panel -->
            <div class="panel alpha-panel">
                <div class="panel-header">
                    <span class="panel-title">ALPHA OPPORTUNITIES</span>
                    <span class="panel-count">HIGH CONFIDENCE</span>
                </div>
                
                <div id="alphaOpportunitiesContainer">
                    <!-- Alpha opportunities will be populated by JavaScript -->
                </div>
            </div>

            <!-- Trading Insights Panel -->
            <div class="panel insights-panel">
                <div class="panel-header">
                    <span class="panel-title">KEY TRADING INSIGHTS</span>
                    <span class="panel-count">ACTIONABLE INTELLIGENCE</span>
                </div>
                
                <div id="tradingInsightsContainer">
                    <!-- Trading insights will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Asset pairs for analysis
        const assets = [
            'BTC/USDT', 'ETH/USDT', 'SOL/USDT', 'AVAX/USDT', 'ADA/USDT', 'DOT/USDT',
            'LINK/USDT', 'MATIC/USDT', 'ATOM/USDT', 'NEAR/USDT', 'FTM/USDT', 'ALGO/USDT'
        ];

        // Asset colors (consistent with bitcoin_beta_report.py)
        const assetColors = {
            'BTC': '#FF6600',
            'ETH': '#627EEA',
            'SOL': '#9945FF',
            'AVAX': '#E84142',
            'ADA': '#0033AD',
            'DOT': '#E6007A',
            'LINK': '#2A5ADA',
            'MATIC': '#8247E5',
            'ATOM': '#2E3148',
            'NEAR': '#00C08B',
            'FTM': '#13B5EC',
            'ALGO': '#000000'
        };

        // Generate beta data (matching bitcoin_beta_report.py methodology)
        function generateBetaData() {
            const betaData = [];
            
            assets.forEach(asset => {
                if (asset === 'BTC/USDT') return; // Skip BTC itself
                
                const assetType = asset.split('/')[0];
                let beta, volatility_ratio, alpha;
                
                // Realistic beta ranges by asset type
                switch(assetType) {
                    case 'ETH':
                        beta = 0.85 + (Math.random() * 0.3);
                        break;
                    case 'SOL':
                    case 'AVAX':
                        beta = 1.2 + (Math.random() * 0.6);
                        break;
                    case 'ADA':
                    case 'DOT':
                    case 'LINK':
                        beta = 0.9 + (Math.random() * 0.4);
                        break;
                    case 'MATIC':
                    case 'ATOM':
                        beta = 1.1 + (Math.random() * 0.5);
                        break;
                    case 'NEAR':
                    case 'FTM':
                        beta = 1.3 + (Math.random() * 0.7);
                        break;
                    case 'ALGO':
                        beta = 0.7 + (Math.random() * 0.4);
                        break;
                    default:
                        beta = 0.8 + (Math.random() * 0.8);
                }
                
                betaData.push({
                    symbol: assetType,
                    beta: beta,
                    correlation: Math.max(0.4, Math.random() * 0.6 + 0.4),
                    volatility_ratio: beta * (0.8 + Math.random() * 0.4),
                    alpha: (Math.random() - 0.5) * 0.2,
                    sharpe_ratio: (Math.random() * 2 - 0.5),
                    max_drawdown: -(Math.random() * 0.4 + 0.1),
                    color: assetColors[assetType] || '#888888'
                });
            });
            
            // Sort by beta (highest first - best opportunities)
            betaData.sort((a, b) => b.beta - a.beta);
            
            return betaData;
        }

        // Generate normalized performance data
        function generatePerformanceData(days = 30) {
            const performanceData = {};
            const timePoints = days;
            
            // Bitcoin baseline
            const btcData = [];
            let btcPrice = 100;
            for (let i = 0; i < timePoints; i++) {
                const change = (Math.random() - 0.5) * 0.06;
                btcPrice *= (1 + change);
                btcData.push(btcPrice);
            }
            
            performanceData['BTC'] = {
                prices: btcData,
                beta: 1.000,
                color: '#FF6600'
            };
            
            // Generate other assets based on beta
            const betaData = generateBetaData();
            betaData.forEach(asset => {
                const assetPrices = [];
                let assetPrice = 100;
                
                for (let i = 0; i < timePoints; i++) {
                    const btcReturn = i > 0 ? (btcData[i] / btcData[i-1] - 1) : 0;
                    const assetReturn = btcReturn * asset.beta + (Math.random() - 0.5) * 0.02;
                    assetPrice *= (1 + assetReturn);
                    assetPrices.push(assetPrice);
                }
                
                performanceData[asset.symbol] = {
                    prices: assetPrices,
                    beta: asset.beta,
                    color: asset.color
                };
            });
            
            return performanceData;
        }

        // Update performance chart
        function updatePerformanceChart() {
            const canvas = document.getElementById('performanceChart');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const rect = canvas.getBoundingClientRect();
            
            canvas.width = rect.width * 2;
            canvas.height = rect.height * 2;
            ctx.scale(2, 2);
            
            const width = rect.width;
            const height = rect.height;
            
            // Clear canvas
            ctx.fillStyle = '#0c1a2b';
            ctx.fillRect(0, 0, width, height);
            
            const performanceData = generatePerformanceData(30);
            const dataKeys = Object.keys(performanceData);
            
            if (dataKeys.length === 0) return;
            
            const margin = { top: 40, right: 40, bottom: 60, left: 60 };
            const chartWidth = width - margin.left - margin.right;
            const chartHeight = height - margin.top - margin.bottom;
            
            // Find min/max values
            let minPrice = Infinity;
            let maxPrice = -Infinity;
            
            dataKeys.forEach(symbol => {
                const prices = performanceData[symbol].prices;
                minPrice = Math.min(minPrice, ...prices);
                maxPrice = Math.max(maxPrice, ...prices);
            });
            
            const padding = (maxPrice - minPrice) * 0.1;
            minPrice -= padding;
            maxPrice += padding;
            
            // Draw grid
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)';
            ctx.lineWidth = 0.5;
            
            // Horizontal grid lines
            for (let i = 0; i <= 5; i++) {
                const y = margin.top + (chartHeight / 5) * i;
                ctx.beginPath();
                ctx.moveTo(margin.left, y);
                ctx.lineTo(margin.left + chartWidth, y);
                ctx.stroke();
                
                // Y-axis labels
                const value = maxPrice - ((maxPrice - minPrice) / 5) * i;
                ctx.fillStyle = '#9ca3af';
                ctx.font = '10px JetBrains Mono';
                ctx.textAlign = 'right';
                ctx.fillText(value.toFixed(1), margin.left - 10, y + 4);
            }
            
            // Vertical grid lines
            const timeSteps = 6;
            for (let i = 0; i <= timeSteps; i++) {
                const x = margin.left + (chartWidth / timeSteps) * i;
                ctx.beginPath();
                ctx.moveTo(x, margin.top);
                ctx.lineTo(x, margin.top + chartHeight);
                ctx.stroke();
                
                // X-axis labels
                const dayLabel = Math.floor((30 / timeSteps) * i);
                ctx.fillStyle = '#9ca3af';
                ctx.font = '10px JetBrains Mono';
                ctx.textAlign = 'center';
                ctx.fillText(`Day ${dayLabel}`, x, height - margin.bottom + 20);
            }
            
            // Chart title
            ctx.fillStyle = '#ffc107';
            ctx.font = 'bold 14px JetBrains Mono';
            ctx.textAlign = 'center';
            ctx.fillText('Normalized Performance vs Bitcoin (Start = 100)', width / 2, 25);
            
            // Sort assets by beta
            const sortedAssets = dataKeys.sort((a, b) => {
                if (a === 'BTC') return -1;
                if (b === 'BTC') return 1;
                return performanceData[b].beta - performanceData[a].beta;
            });
            
            // Draw performance lines
            sortedAssets.forEach(symbol => {
                const data = performanceData[symbol];
                const prices = data.prices;
                
                ctx.strokeStyle = data.color;
                ctx.lineWidth = symbol === 'BTC' ? 3 : 2;
                ctx.globalAlpha = symbol === 'BTC' ? 1.0 : 0.9;
                
                ctx.beginPath();
                
                prices.forEach((price, i) => {
                    const x = margin.left + (chartWidth / (prices.length - 1)) * i;
                    const y = margin.top + chartHeight - ((price - minPrice) / (maxPrice - minPrice)) * chartHeight;
                    
                    if (i === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                });
                
                ctx.stroke();
                ctx.globalAlpha = 1.0;
            });
            
            // Update legend
            updatePerformanceLegend(sortedAssets, performanceData);
        }

        // Update performance legend
        function updatePerformanceLegend(sortedAssets, performanceData) {
            const legendContainer = document.getElementById('performanceLegend');
            if (!legendContainer) return;
            
            legendContainer.innerHTML = '';
            
            sortedAssets.forEach(symbol => {
                const data = performanceData[symbol];
                const legendItem = document.createElement('div');
                legendItem.className = 'legend-item';
                
                const line = document.createElement('div');
                line.className = 'legend-line';
                line.style.backgroundColor = data.color;
                
                const label = document.createElement('span');
                label.textContent = `${symbol} (Œ≤=${data.beta.toFixed(3)})`;
                
                legendItem.appendChild(line);
                legendItem.appendChild(label);
                legendContainer.appendChild(legendItem);
            });
        }

        // Update beta table
        function updateBetaTable() {
            const tableBody = document.getElementById('betaTableBody');
            if (!tableBody) return;
            
            const betaData = generateBetaData();
            tableBody.innerHTML = '';
            
            betaData.forEach(asset => {
                const row = document.createElement('tr');
                
                let betaClass = 'beta-value-medium';
                if (asset.beta > 1.5) betaClass = 'beta-value-high';
                else if (asset.beta < 0.8) betaClass = 'beta-value-low';
                
                row.innerHTML = `
                    <td class="symbol-name">${asset.symbol}</td>
                    <td class="${betaClass}">${asset.beta.toFixed(3)}</td>
                    <td>${asset.correlation.toFixed(3)}</td>
                    <td>${asset.volatility_ratio.toFixed(3)}</td>
                    <td>${(asset.alpha * 100).toFixed(2)}%</td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        // Update correlation heatmap
        function updateCorrelationHeatmap() {
            const canvas = document.getElementById('correlationHeatmap');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            const rect = canvas.getBoundingClientRect();
            
            canvas.width = rect.width * 2;
            canvas.height = rect.height * 2;
            ctx.scale(2, 2);
            
            const width = rect.width;
            const height = rect.height;
            
            // Clear canvas
            ctx.fillStyle = '#0c1a2b';
            ctx.fillRect(0, 0, width, height);
            
            const betaData = generateBetaData();
            const timeframes = ['4H', '30M', '5M', '1M'];
            
            const cellWidth = (width - 100) / timeframes.length;
            const cellHeight = (height - 80) / betaData.length;
            
            // Draw title
            ctx.fillStyle = '#ffc107';
            ctx.font = 'bold 12px JetBrains Mono';
            ctx.textAlign = 'center';
            ctx.fillText('Correlation with Bitcoin Across Timeframes', width / 2, 20);
            
            // Draw timeframe headers
            timeframes.forEach((tf, i) => {
                ctx.fillStyle = '#9ca3af';
                ctx.font = '10px JetBrains Mono';
                ctx.textAlign = 'center';
                ctx.fillText(tf, 80 + i * cellWidth + cellWidth / 2, 45);
            });
            
            // Draw asset labels and correlation cells
            betaData.forEach((asset, i) => {
                // Asset label
                ctx.fillStyle = '#e5e7eb';
                ctx.font = '9px JetBrains Mono';
                ctx.textAlign = 'right';
                ctx.fillText(asset.symbol, 70, 60 + i * cellHeight + cellHeight / 2);
                
                // Correlation cells
                timeframes.forEach((tf, j) => {
                    const correlation = asset.correlation + (Math.random() - 0.5) * 0.2;
                    const normalizedCorr = Math.max(0, Math.min(1, correlation));
                    
                    // Color based on correlation strength
                    const red = Math.floor(255 * (1 - normalizedCorr));
                    const green = Math.floor(255 * normalizedCorr);
                    const blue = 50;
                    
                    ctx.fillStyle = `rgba(${red}, ${green}, ${blue}, 0.8)`;
                    ctx.fillRect(80 + j * cellWidth, 50 + i * cellHeight, cellWidth - 1, cellHeight - 1);
                    
                    // Correlation value
                    ctx.fillStyle = normalizedCorr > 0.5 ? '#000' : '#fff';
                    ctx.font = '8px JetBrains Mono';
                    ctx.textAlign = 'center';
                    ctx.fillText(normalizedCorr.toFixed(2), 80 + j * cellWidth + cellWidth / 2, 50 + i * cellHeight + cellHeight / 2 + 3);
                });
            });
        }

        // Update alpha opportunities
        function updateAlphaOpportunities() {
            const container = document.getElementById('alphaOpportunitiesContainer');
            if (!container) return;
            
            const betaData = generateBetaData();
            container.innerHTML = '';
            
            // Create alpha opportunities from high beta assets
            const highBetaAssets = betaData.filter(asset => asset.beta > 1.2).slice(0, 5);
            
            highBetaAssets.forEach((asset, index) => {
                const alphaItem = document.createElement('div');
                alphaItem.className = 'alpha-item';
                
                const patterns = ['MOMENTUM_BREAKOUT', 'BETA_DIVERGENCE', 'CORRELATION_ANOMALY', 'VOLATILITY_EXPANSION'];
                const pattern = patterns[index % patterns.length];
                
                alphaItem.innerHTML = `
                    <div class="alpha-symbol">üéØ ${asset.symbol}</div>
                    <div class="alpha-pattern">${pattern.replace('_', ' ')}</div>
                    <div>Beta coefficient of ${asset.beta.toFixed(3)} suggests ${((asset.beta - 1) * 100).toFixed(0)}% amplification potential over Bitcoin movements.</div>
                    <div class="alpha-confidence">Confidence: ${(80 + Math.random() * 15).toFixed(0)}% | Alpha: ${(asset.alpha * 100).toFixed(1)}%</div>
                `;
                
                container.appendChild(alphaItem);
            });
        }

        // Update trading insights
        function updateTradingInsights() {
            const container = document.getElementById('tradingInsightsContainer');
            if (!container) return;
            
            const betaData = generateBetaData();
            const avgBeta = betaData.reduce((sum, asset) => sum + asset.beta, 0) / betaData.length;
            const highestBeta = betaData[0];
            const lowestBeta = betaData[betaData.length - 1];
            
            const insights = [
                `${highestBeta.symbol} shows the highest beta (${highestBeta.beta.toFixed(2)}), offering maximum leverage to Bitcoin movements for aggressive strategies.`,
                `${lowestBeta.symbol} provides the most stable exposure (Œ≤=${lowestBeta.beta.toFixed(2)}), suitable for conservative portfolio allocation.`,
                `Portfolio average beta of ${avgBeta.toFixed(2)} suggests ${avgBeta > 1.2 ? 'amplified' : avgBeta < 0.8 ? 'dampened' : 'moderate'} exposure to Bitcoin volatility.`,
                `High-beta assets (Œ≤>1.5) represent ${betaData.filter(a => a.beta > 1.5).length} opportunities for momentum-based strategies.`,
                `Consider beta rotation strategies: high-beta during Bitcoin bull runs, low-beta during consolidation phases.`
            ];
            
            container.innerHTML = '';
            insights.forEach(insight => {
                const insightItem = document.createElement('div');
                insightItem.className = 'insight-item';
                insightItem.textContent = insight;
                container.appendChild(insightItem);
            });
        }

        // Update summary metrics
        function updateSummaryMetrics() {
            const betaData = generateBetaData();
            const avgBeta = betaData.reduce((sum, asset) => sum + asset.beta, 0) / betaData.length;
            const avgCorrelation = betaData.reduce((sum, asset) => sum + asset.correlation, 0) / betaData.length;
            
            document.getElementById('symbolsCount').textContent = betaData.length + 1; // +1 for BTC
            document.getElementById('avgBeta').textContent = avgBeta.toFixed(3);
            document.getElementById('avgCorrelation').textContent = avgCorrelation.toFixed(3);
            document.getElementById('alphaOpportunities').textContent = betaData.filter(a => a.beta > 1.2).length;
            
            // Update beta gauge
            const betaGauge = document.getElementById('betaGaugeFill');
            const betaPercentage = Math.min((avgBeta / 2.0) * 100, 100);
            betaGauge.style.width = `${betaPercentage}%`;
            
            if (avgBeta > 1.5) {
                betaGauge.style.backgroundColor = '#10b981';
                document.getElementById('riskLevel').textContent = 'HIGH OPPORTUNITY';
                document.getElementById('riskLevel').style.color = '#10b981';
            } else if (avgBeta > 1.2) {
                betaGauge.style.backgroundColor = '#f59e0b';
                document.getElementById('riskLevel').textContent = 'MODERATE';
                document.getElementById('riskLevel').style.color = '#f59e0b';
            } else {
                betaGauge.style.backgroundColor = '#6b7280';
                document.getElementById('riskLevel').textContent = 'CONSERVATIVE';
                document.getElementById('riskLevel').style.color = '#6b7280';
            }
            
            // Update market interpretation
            const interpretation = document.getElementById('marketInterpretation');
            if (avgBeta >= 1.3) {
                interpretation.innerHTML = `
                    <strong>High Opportunity Portfolio:</strong> Average beta of ${avgBeta.toFixed(3)} indicates strong amplification potential. 
                    This portfolio shows excellent leverage to Bitcoin movements, suitable for aggressive alpha generation strategies. 
                    Consider position sizing carefully due to elevated volatility exposure.
                `;
            } else if (avgBeta <= 0.8) {
                interpretation.innerHTML = `
                    <strong>Conservative Portfolio:</strong> Average beta of ${avgBeta.toFixed(3)} suggests dampened volatility relative to Bitcoin. 
                    This allocation provides stability and reduced drawdown risk, ideal for risk-averse strategies with steady exposure.
                `;
            } else {
                interpretation.innerHTML = `
                    <strong>Balanced Exposure:</strong> Average beta of ${avgBeta.toFixed(3)} indicates moderate correlation with Bitcoin. 
                    This portfolio offers balanced risk-reward characteristics suitable for diversified crypto exposure.
                `;
            }
        }

        // Initialize dashboard
        function initializeDashboard() {
            updateSummaryMetrics();
            updatePerformanceChart();
            updateBetaTable();
            updateCorrelationHeatmap();
            updateAlphaOpportunities();
            updateTradingInsights();
        }

        // Auto-update every 15 seconds
        function updateDashboard() {
            if (Math.random() > 0.7) {
                initializeDashboard();
            }
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            initializeDashboard();
            setInterval(updateDashboard, 15000);
            
            // Add resize listener for charts
            window.addEventListener('resize', function() {
                setTimeout(() => {
                    updatePerformanceChart();
                    updateCorrelationHeatmap();
                }, 100);
            });
            
            console.log(`
[SYSTEM] ================================================
[SYSTEM] VIRTUOSO BETA ANALYSIS DASHBOARD v1.0 READY
[SYSTEM] TERMINAL AMBER THEME INTEGRATED
[SYSTEM] COMPREHENSIVE BITCOIN CORRELATION ANALYSIS
[SYSTEM] MULTI-TIMEFRAME BETA CALCULATIONS ACTIVE
[SYSTEM] ALPHA OPPORTUNITY DETECTION ENABLED
[SYSTEM] REAL-TIME PERFORMANCE TRACKING ONLINE
[SYSTEM] PROFESSIONAL CHART RENDERING ACTIVE
[SYSTEM] NAVIGATION INTEGRATION COMPLETE
[SYSTEM] ================================================`);
        });
    </script>
</body>
</html> 