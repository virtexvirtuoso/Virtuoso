# Optuna Configuration for Virtuoso CCXT Trading System
# Production-ready settings with safety constraints

# Storage Configuration
storage:
  url: "sqlite:///optimization/optuna_studies.db"
  heartbeat_interval: 60
  grace_period: 120
  failed_trial_callback: null

# Resource Limits
resource_limits:
  max_memory_gb: 2.0
  max_cpu_percent: 75.0
  max_concurrent_studies: 2
  max_trial_duration_seconds: 1800
  max_study_duration_seconds: 7200
  max_concurrent_trials: 2
  check_interval_seconds: 10

# Safety Settings
safety:
  enable_circuit_breaker: true
  max_consecutive_failures: 5
  min_trials_before_deployment: 10
  performance_degradation_threshold: -0.05
  auto_rollback: true

# Study Configuration
study_defaults:
  sampler: "TPESampler"
  pruner: "MedianPruner"
  direction: "maximize"
  load_if_exists: true

# Monitoring
monitoring:
  enable_dashboard: true
  dashboard_port: 8004
  update_interval_seconds: 30
  cache_results: true
  memcached_ttl: 300

# Parameter Spaces
parameter_spaces:
  technical_indicators:
    enabled: true
    weight: 0.25
  order_flow:
    enabled: true
    weight: 0.25
  sentiment:
    enabled: true
    weight: 0.15
  liquidity:
    enabled: true
    weight: 0.15
  bitcoin_beta:
    enabled: true
    weight: 0.10
  smart_money_flow:
    enabled: true
    weight: 0.10

# Confluence weights for 6-dimensional analysis
confluence:
  technical_indicators_weight: 0.25
  order_flow_weight: 0.25
  sentiment_weight: 0.15
  liquidity_weight: 0.15
  bitcoin_beta_weight: 0.10
  smart_money_flow_weight: 0.10

# Optimization Settings
optimization:
  production_mode: true
  max_trials: 100
  study_name: "production_safety"
  objectives: ["sharpe_ratio", "max_drawdown", "win_rate"]

# Deployment Settings
deployment:
  production_mode: true
  require_validation: true
  backup_before_apply: true
  gradual_rollout: true
  test_symbols: ["BTCUSDT", "ETHUSDT"]

# Logging
logging:
  level: "INFO"
  file: "logs/optuna_optimization.log"
  max_file_size_mb: 100
  backup_count: 5