<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Smart Money Liquidation Tracker – Demo</title>
    <style>
        :root {
            --bg-body: #070b12;
            --bg-panel: #0c121c;
            --border-light: #1b2433;
            --text-primary: #e6edf3;
            --text-secondary: #9aa7b8;
            --accent-primary: #42a5f5;
            --accent-positive: #4caf50;
            --accent-warning: #ff9900;
            --accent-negative: #f44336;
            --content-padding: 16px;
            --card-gap: 16px;
        }

        body {
            margin: 0;
            background: var(--bg-body);
            color: var(--text-primary);
            font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .container {
            max-width: 430px;
            margin: 16px auto;
            padding: var(--content-padding);
        }

        .mobile-card {
            background: var(--bg-panel);
            border: 1px solid var(--border-light);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: var(--card-gap);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            transform: translate3d(0, 0, 0);
            contain: layout style paint;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .card-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-primary);
            letter-spacing: 0.3px;
        }

        .card-badge {
            font-size: 12px;
            padding: 4px 8px;
            border-radius: 12px;
            font-weight: 500;
        }

        .badges-row {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-bottom: 12px;
        }

        .pill {
            font-size: 12px;
            padding: 6px 10px;
            border-radius: 999px;
            border: 1px solid var(--border-light);
            color: var(--text-secondary);
            background: rgba(255,255,255,0.02);
        }

        .pill.positive { background: rgba(76, 175, 80, 0.12); color: var(--accent-positive); }
        .pill.warning  { background: rgba(255, 153, 0, 0.12); color: var(--accent-warning); }
        .pill.negative { background: rgba(244, 67, 54, 0.12); color: var(--accent-negative); }

        .heatmap {
            display: grid;
            grid-template-columns: repeat(20, 1fr);
            gap: 2px;
            height: 36px;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 12px;
            background: #0a1018;
            border: 1px solid var(--border-light);
            position: relative;
        }

        .heatcell { height: 100%; opacity: 0.85; }

        .price-marker {
            position: absolute;
            top: -6px;
            width: 2px;
            height: 48px;
            background: var(--accent-primary);
            box-shadow: 0 0 8px var(--accent-primary);
        }

        .list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .row {
            display: grid;
            grid-template-columns: 68px 1fr 64px;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid var(--border-light);
        }

        .row:last-child { border-bottom: none; }

        .sym {
            font-size: 14px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .meta {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            color: var(--text-secondary);
            font-size: 12px;
        }

        .score {
            text-align: right;
            font-weight: 700;
            padding: 8px 10px;
            border-radius: 10px;
            font-size: 14px;
        }

        .score.high   { background: rgba(76, 175, 80, 0.18); color: var(--accent-positive); }
        .score.medium { background: rgba(255, 153, 0, 0.18); color: var(--accent-warning); }
        .score.low    { background: rgba(244, 67, 54, 0.18); color: var(--accent-negative); }

        .legend {
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: var(--text-secondary);
            font-size: 11px;
            margin-top: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="mobile-card">
            <div class="card-header">
                <h2 class="card-title">Smart Money Liquidation Tracker</h2>
                <span class="card-badge" style="background: rgba(255, 153, 0, 0.2); color: var(--accent-warning);">LIVE</span>
            </div>

            <div class="badges-row" id="badgesRow">
                <!-- dynamic pills -->
            </div>

            <div class="heatmap" id="heatmap">
                <!-- 20 heat cells -->
                <div class="price-marker" id="priceMarker" style="left: 50%"></div>
            </div>
            <div class="legend">
                <span>Liquidation cluster intensity</span>
                <span id="clusterNote">Clusters near current price</span>
            </div>

            <div class="list" id="rows">
                <!-- top 3 symbols -->
            </div>
        </div>
    </div>

    <script>
        function clamp(v, lo, hi) { return Math.max(lo, Math.min(hi, v)); }
        function lerp(a, b, t) { return a + (b - a) * t; }
        function heatColor(intensity) {
            const t = clamp(intensity, 0, 1);
            const h = lerp(40, 0, t); // yellow -> red
            const s = 95;
            const l = lerp(30, 50, t);
            return `hsl(${h}deg ${s}% ${l}%)`;
        }

        const demo = {
            squeezeRisk: 'High',
            crowding: 78,
            divergence: 'Short Build',
            pricePct: 0.56, // 0..1 across heatmap
            heat: Array.from({ length: 20 }, (_, i) => {
                const x = i / 19;
                const hump1 = Math.exp(-Math.pow((x - 0.55) / 0.08, 2));
                const hump2 = 0.7 * Math.exp(-Math.pow((x - 0.28) / 0.06, 2));
                return clamp(hump1 + hump2, 0, 1);
            }),
            rows: [
                { sym: 'BTCUSDT', oi1h: '+2.3%', px1h: '-0.8%', fundZ: '+2.1σ', ls: '62/38', density: 84, p: 78 },
                { sym: 'ETHUSDT', oi1h: '+1.7%', px1h: '-0.5%', fundZ: '+1.6σ', ls: '58/42', density: 71, p: 72 },
                { sym: 'SOLUSDT', oi1h: '+2.9%', px1h: '-1.3%', fundZ: '+2.4σ', ls: '65/35', density: 88, p: 81 },
            ]
        };

        function render() {
            // Badges
            const badges = [
                { text: `Squeeze Risk: ${demo.squeezeRisk}`, cls: demo.squeezeRisk === 'High' ? 'negative' : demo.squeezeRisk === 'Medium' ? 'warning' : 'positive' },
                { text: `Crowding: ${demo.crowding}`, cls: demo.crowding >= 70 ? 'warning' : 'positive' },
                { text: `Divergence: ${demo.divergence}`, cls: demo.divergence.includes('Short') ? 'negative' : 'positive' },
            ];
            const badgesRow = document.getElementById('badgesRow');
            badgesRow.innerHTML = badges.map(b => `<span class="pill ${b.cls}">${b.text}</span>`).join('');

            // Heatmap
            const heatmap = document.getElementById('heatmap');
            const cells = demo.heat.map(v => `<div class="heatcell" style="background:${heatColor(v)}; opacity:${0.25 + 0.7 * v}"></div>`).join('');
            heatmap.insertAdjacentHTML('afterbegin', cells);
            const marker = document.getElementById('priceMarker');
            marker.style.left = `${clamp(demo.pricePct, 0, 1) * 100}%`;
            document.getElementById('clusterNote').textContent = demo.pricePct > 0.45 && demo.pricePct < 0.65 ? 'Clusters near current price' : 'Clusters offset from price';

            // Rows
            const rows = document.getElementById('rows');
            rows.innerHTML = demo.rows.map(r => {
                const cls = r.p >= 75 ? 'high' : r.p >= 55 ? 'medium' : 'low';
                return `
                    <div class="row">
                        <div class="sym">${r.sym}</div>
                        <div class="meta">
                            <span>OI Δ 1h: ${r.oi1h}</span>
                            <span>Price Δ 1h: ${r.px1h}</span>
                            <span>Funding z: ${r.fundZ}</span>
                            <span>L/S: ${r.ls}</span>
                            <span>Cluster: ${r.density}</span>
                        </div>
                        <div class="score ${cls}">${r.p}%</div>
                    </div>`;
            }).join('');
        }

        document.addEventListener('DOMContentLoaded', render);
    </script>
</body>
</html>


