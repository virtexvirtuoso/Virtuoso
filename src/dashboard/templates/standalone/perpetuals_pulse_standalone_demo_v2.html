<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perpetuals Pulse Enhanced - Phase 2 Demo</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        :root {
            --bg-primary: #0f0f0f;
            --bg-panel: #161616;
            --bg-card: #1a1a1a;

            --border-light: #222222;
            --border-glow: rgba(251, 191, 36, 0.3);

            --text-primary: #f5f5f5;
            --text-secondary: #a8a8a8;
            --text-muted: #7a7a7a;
            --text-accent: #fbbf24;

            --accent-positive: #00d68f;
            --accent-negative: #ff5252;
            --accent-warning: #ffb800;
            --accent-primary: #fbbf24;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            padding: 40px;
            line-height: 1.5;
        }

        .demo-container {
            max-width: 400px;
            margin: 0 auto;
        }

        .demo-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .demo-header h1 {
            font-size: 24px;
            color: var(--text-accent);
            margin-bottom: 8px;
        }

        .demo-header p {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .widget {
            background: var(--bg-card);
            border: 1px solid var(--border-light);
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .widget-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 16px;
            background: rgba(0,0,0,0.2);
            border-bottom: 1px solid var(--border-light);
        }

        .widget-title {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            font-weight: 600;
            color: var(--text-primary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .widget-body {
            padding: 14px;
        }

        .cex-badge {
            font-size: 9px;
            font-weight: 700;
            padding: 3px 6px;
            border-radius: 4px;
            background: rgba(255, 165, 0, 0.15);
            color: #ffa500;
            border: 1px solid rgba(255, 165, 0, 0.3);
        }

        /* Signal Badge in Header */
        .signal-badge {
            font-size: 10px;
            font-weight: 700;
            padding: 3px 6px;
            border-radius: 4px;
            display: inline-flex;
            align-items: center;
            gap: 2px;
            transition: all 0.2s ease;
        }

        .signal-badge.bullish {
            background: rgba(0, 214, 143, 0.15);
            color: var(--accent-positive);
            border: 1px solid rgba(0, 214, 143, 0.3);
        }

        .signal-badge.bearish {
            background: rgba(255, 82, 82, 0.15);
            color: var(--accent-negative);
            border: 1px solid rgba(255, 82, 82, 0.3);
        }

        /* Signal Pills */
        .signal-pill {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 4px 6px;
            border-radius: 4px;
            font-size: 9px;
            font-weight: 600;
            cursor: help;
            transition: all 0.2s ease;
            border: 1px solid transparent;
        }

        .signal-pill:hover {
            transform: translateY(-1px);
            filter: brightness(1.2);
        }

        /* Signal Direction Colors */
        .signal-pill.bullish {
            background: rgba(0, 214, 143, 0.12);
            color: var(--accent-positive);
            border-color: rgba(0, 214, 143, 0.2);
        }

        .signal-pill.bearish {
            background: rgba(255, 82, 82, 0.12);
            color: var(--accent-negative);
            border-color: rgba(255, 82, 82, 0.2);
        }

        /* Signal Strength Intensity */
        .signal-pill.extreme {
            font-weight: 700;
            border-width: 1.5px;
        }

        .signal-pill.strong {
            opacity: 0.95;
        }

        .signal-pill.moderate {
            opacity: 0.85;
        }

        .signal-pill.weak {
            opacity: 0.7;
        }

        .signal-icon {
            display: inline-flex;
            align-items: center;
        }

        .signal-label {
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }

        .signal-strength {
            font-size: 8px;
            opacity: 0.7;
            margin-left: 2px;
        }

        .controls {
            background: var(--bg-panel);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .controls h3 {
            font-size: 14px;
            color: var(--text-accent);
            margin-bottom: 12px;
        }

        .control-group {
            margin-bottom: 12px;
        }

        .control-group label {
            display: block;
            font-size: 11px;
            color: var(--text-secondary);
            margin-bottom: 4px;
            text-transform: uppercase;
        }

        .control-group button {
            background: var(--bg-card);
            border: 1px solid var(--border-light);
            color: var(--text-primary);
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
            margin-right: 6px;
            transition: all 0.2s ease;
        }

        .control-group button:hover {
            background: var(--accent-primary);
            color: #000;
        }

        /* ===================================
           ANIMATED L/S RATIO GLOW EFFECT
           =================================== */

        .ls-ratio-container {
            background: rgba(0, 0, 0, 0.2);
            padding: 8px;
            border-radius: 6px;
            position: relative;
            overflow: hidden;
        }

        .ls-ratio-header {
            font-size: 9px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            text-align: center;
            margin-bottom: 8px;
        }

        .ls-ratio-percentages {
            display: flex;
            justify-content: center;
            gap: 3px;
            align-items: baseline;
            margin-bottom: 8px;
        }

        .ls-ratio-percentages .long-pct {
            font-size: 13px;
            font-weight: 700;
            color: var(--accent-positive);
        }

        .ls-ratio-percentages .divider {
            color: var(--text-secondary);
            font-size: 10px;
        }

        .ls-ratio-percentages .short-pct {
            font-size: 13px;
            font-weight: 700;
            color: var(--accent-negative);
        }

        .ls-ratio-bar-container {
            position: relative;
            height: 16px;
            margin-bottom: 6px;
            border-radius: 4px;
            overflow: hidden;
            background: rgba(0, 0, 0, 0.3);
            transform: translateZ(0);
            backface-visibility: hidden;
        }

        .ls-ratio-bar {
            position: absolute;
            height: 100%;
            display: flex;
            width: 100%;
        }

        .ls-ratio-bar .long-side,
        .ls-ratio-bar .short-side {
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            will-change: filter, background;
        }

        .ls-ratio-bar .long-side {
            background: var(--accent-positive);
        }

        .ls-ratio-bar .short-side {
            background: var(--accent-negative);
            flex: 1;
        }

        .side-label {
            font-size: 8px;
            font-weight: 700;
            color: rgba(255, 255, 255, 0.9);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
        }

        .ls-ratio-label {
            font-size: 9px;
            color: var(--text-secondary);
            text-align: center;
        }

        .ls-ratio-label.extreme-warning {
            color: var(--accent-positive);
            font-weight: 600;
        }

        .ls-ratio-label.extreme-warning.short {
            color: var(--accent-negative);
        }

        /* Glow Animations */
        @keyframes glow-pulse {
            0%, 100% {
                filter: drop-shadow(0 0 var(--glow-size-min) var(--glow-color))
                        drop-shadow(0 0 calc(var(--glow-size-min) * 1.5) var(--glow-color-fade));
            }
            50% {
                filter: drop-shadow(0 0 var(--glow-size-max) var(--glow-color-bright))
                        drop-shadow(0 0 calc(var(--glow-size-max) * 1.5) var(--glow-color))
                        drop-shadow(0 0 calc(var(--glow-size-max) * 2.5) var(--glow-color-fade));
            }
        }

        @keyframes shimmer {
            0% { background-position: 0% 50%; }
            100% { background-position: 200% 50%; }
        }

        /* Moderate Long (55-65%) */
        .ls-ratio-container.moderate-long .long-side {
            --glow-color: rgba(0, 214, 143, 0.5);
            --glow-color-fade: rgba(0, 214, 143, 0.3);
            filter: drop-shadow(0 0 12px var(--glow-color))
                    drop-shadow(0 0 20px var(--glow-color-fade))
                    drop-shadow(0 0 30px rgba(0, 214, 143, 0.15));
        }

        /* Moderate Short (55-65%) */
        .ls-ratio-container.moderate-short .short-side {
            --glow-color: rgba(255, 82, 82, 0.5);
            --glow-color-fade: rgba(255, 82, 82, 0.3);
            filter: drop-shadow(0 0 12px var(--glow-color))
                    drop-shadow(0 0 20px var(--glow-color-fade))
                    drop-shadow(0 0 30px rgba(255, 82, 82, 0.15));
        }

        /* High Long (65-70%) */
        .ls-ratio-container.high-long .long-side {
            --glow-size-min: 20px;
            --glow-size-max: 45px;
            --glow-color: rgba(0, 214, 143, 0.7);
            --glow-color-bright: rgba(0, 255, 170, 0.95);
            --glow-color-fade: rgba(0, 214, 143, 0.4);
            animation: glow-pulse 2s ease-in-out infinite;
            background: linear-gradient(
                110deg,
                var(--accent-positive) 0%,
                rgba(0, 255, 170, 0.9) 40%,
                var(--accent-positive) 50%,
                rgba(0, 255, 170, 0.85) 60%,
                var(--accent-positive) 100%
            );
            background-size: 200% 100%;
            animation: glow-pulse 2s ease-in-out infinite,
                       shimmer 3s linear infinite;
        }

        /* High Short (65-70%) */
        .ls-ratio-container.high-short .short-side {
            --glow-size-min: 20px;
            --glow-size-max: 45px;
            --glow-color: rgba(255, 82, 82, 0.7);
            --glow-color-bright: rgba(255, 120, 120, 0.95);
            --glow-color-fade: rgba(255, 82, 82, 0.4);
            animation: glow-pulse 2s ease-in-out infinite;
            background: linear-gradient(
                110deg,
                var(--accent-negative) 0%,
                rgba(255, 120, 120, 0.9) 40%,
                var(--accent-negative) 50%,
                rgba(255, 120, 120, 0.85) 60%,
                var(--accent-negative) 100%
            );
            background-size: 200% 100%;
            animation: glow-pulse 2s ease-in-out infinite,
                       shimmer 3s linear infinite;
        }

        /* Extreme Long (>70%) */
        .ls-ratio-container.extreme-long .long-side {
            --glow-size-min: 35px;
            --glow-size-max: 80px;
            --glow-color: rgba(0, 214, 143, 0.85);
            --glow-color-bright: rgba(0, 255, 170, 1.0);
            --glow-color-fade: rgba(0, 214, 143, 0.5);
            animation: glow-pulse 1.2s ease-in-out infinite;
            background: linear-gradient(
                110deg,
                #00ffaa 0%,
                var(--accent-positive) 25%,
                #00ffaa 50%,
                var(--accent-positive) 75%,
                #00ffaa 100%
            );
            background-size: 300% 100%;
            animation: glow-pulse 1.2s ease-in-out infinite,
                       shimmer 1.5s linear infinite;
        }

        /* Extreme Short (>70%) */
        .ls-ratio-container.extreme-short .short-side {
            --glow-size-min: 35px;
            --glow-size-max: 80px;
            --glow-color: rgba(255, 82, 82, 0.85);
            --glow-color-bright: rgba(255, 100, 100, 1.0);
            --glow-color-fade: rgba(255, 82, 82, 0.5);
            animation: glow-pulse 1.2s ease-in-out infinite;
            background: linear-gradient(
                110deg,
                #ff7070 0%,
                var(--accent-negative) 25%,
                #ff7070 50%,
                var(--accent-negative) 75%,
                #ff7070 100%
            );
            background-size: 300% 100%;
            animation: glow-pulse 1.2s ease-in-out infinite,
                       shimmer 1.5s linear infinite;
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="demo-container">
            <div class="demo-header">
                <h1>Perpetuals Pulse Enhanced</h1>
                <p>Phase 2 Signal Integration Demo</p>
            </div>

            <!-- Interactive Controls -->
            <div class="controls">
                <h3>Demo Scenarios</h3>
                <div class="control-group">
                    <label>Load Scenario:</label>
                    <button @click="loadScenario('neutral')">Neutral Market</button>
                    <button @click="loadScenario('bullish')">Bullish Signals</button>
                    <button @click="loadScenario('bearish')">Bearish Signals</button>
                    <button @click="loadScenario('extreme')">Extreme Conditions</button>
                </div>
            </div>

            <!-- Widget -->
            <div class="widget">
                <div class="widget-header">
                    <div class="widget-title">
                        <i data-lucide="bar-chart-3"></i>
                        Perpetuals Pulse
                    </div>
                    <div style="display: flex; gap: 6px; align-items: center;">
                        <!-- Signal Summary Badge -->
                        <span v-if="perpsPulse.signalCount > 0"
                              :class="['signal-badge', perpsPulse.signalSummary.bearish > perpsPulse.signalSummary.bullish ? 'bearish' : 'bullish']"
                              :title="perpsPulse.signalSummary.bullish + ' bullish, ' + perpsPulse.signalSummary.bearish + ' bearish signals'">
                            {{ perpsPulse.signalCount }}
                            <i :data-lucide="perpsPulse.signalSummary.bearish > perpsPulse.signalSummary.bullish ? 'trending-down' : 'trending-up'"
                               style="width: 10px; height: 10px; margin-left: 2px;"></i>
                        </span>
                        <span class="cex-badge">{{ perpsPulse.exchangeCount }} CEX/DEX</span>
                    </div>
                </div>
                <div class="widget-body">
                    <!-- Row 1: Funding + L/S + Basis -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; margin-bottom: 10px;">
                        <!-- Funding Rate -->
                        <div style="background: rgba(0,0,0,0.2); padding: 8px; border-radius: 6px; text-align: center;">
                            <div style="font-size: 9px; color: var(--text-secondary); text-transform: uppercase;">Funding</div>
                            <div style="font-size: 14px; font-weight: 700; color: var(--text-primary);">{{ perpsPulse.fundingRate }}</div>
                            <div style="font-size: 9px; color: var(--text-secondary);">{{ perpsPulse.fundingSentiment }}</div>
                        </div>
                        <!-- Long/Short with Animated Glow -->
                        <div class="ls-ratio-container" :class="lsBarClass">
                            <div class="ls-ratio-header">Long / Short</div>
                            <div class="ls-ratio-percentages">
                                <span class="long-pct">{{ perpsPulse.longPct }}%</span>
                                <span class="divider">/</span>
                                <span class="short-pct">{{ perpsPulse.shortPct }}%</span>
                            </div>
                            <div class="ls-ratio-bar-container">
                                <div class="ls-ratio-bar">
                                    <div class="long-side" :style="{ width: perpsPulse.longPct + '%' }">
                                        <span class="side-label">LONG</span>
                                    </div>
                                    <div class="short-side">
                                        <span class="side-label">SHORT</span>
                                    </div>
                                </div>
                            </div>
                            <div class="ls-ratio-label" :class="lsLabelClass">{{ perpsPulse.lsLabel }}</div>
                        </div>
                        <!-- Basis -->
                        <div style="background: rgba(0,0,0,0.2); padding: 8px; border-radius: 6px; text-align: center;">
                            <div style="font-size: 9px; color: var(--text-secondary); text-transform: uppercase;">Basis</div>
                            <div style="font-size: 9px; font-weight: 600; padding: 2px 4px; border-radius: 3px; background: rgba(255, 191, 0, 0.15); color: var(--text-primary); display: inline-block;">{{ perpsPulse.basisStatus }}</div>
                            <div style="font-size: 9px; color: var(--text-secondary); margin-top: 2px;">{{ perpsPulse.basisPct }}</div>
                        </div>
                    </div>

                    <!-- Row 2: OI + Volume + CEX/DEX -->
                    <div style="background: rgba(0,0,0,0.15); padding: 10px; border-radius: 8px; margin-bottom: 8px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;">
                            <div>
                                <div style="font-size: 9px; color: var(--text-secondary); text-transform: uppercase;">Open Interest</div>
                                <div style="font-size: 16px; font-weight: 700; color: var(--text-primary);">{{ perpsPulse.openInterest }}</div>
                            </div>
                            <div style="text-align: right;">
                                <div style="font-size: 9px; color: var(--text-secondary); text-transform: uppercase;">24H Volume</div>
                                <div style="font-size: 14px; font-weight: 600; color: var(--text-secondary);">{{ perpsPulse.volume }}</div>
                            </div>
                        </div>
                        <!-- CEX/DEX Bar -->
                        <div style="margin-top: 6px;">
                            <div style="font-size: 9px; color: var(--text-secondary); margin-bottom: 3px; text-transform: uppercase;">CEX vs DEX</div>
                            <div style="height: 16px; border-radius: 4px; overflow: hidden; display: flex; background: rgba(0,0,0,0.3);">
                                <div :style="{ width: perpsPulse.cexPct + '%' }" style="background: linear-gradient(180deg, #ffa500 0%, #e67b00 100%); height: 100%; display: flex; align-items: center; justify-content: center; transition: width 0.5s ease;">
                                    <span style="font-size: 9px; font-weight: 700; color: white;">CEX {{ perpsPulse.cexPct }}%</span>
                                </div>
                                <div style="background: linear-gradient(180deg, #8b5cf6 0%, #7244e8 100%); height: 100%; display: flex; align-items: center; justify-content: center; transition: width 0.5s ease; flex: 1;">
                                    <span style="font-size: 9px; font-weight: 700; color: white;">DEX</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Row 3: Advanced Metrics (NEW) -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 6px; margin-bottom: 8px;">
                        <!-- Funding Z-Score -->
                        <div style="background: rgba(0,0,0,0.1); padding: 6px 8px; border-radius: 4px; display: flex; align-items: center; justify-content: space-between;">
                            <div style="font-size: 9px; color: var(--text-secondary); text-transform: uppercase;">Funding σ</div>
                            <div :style="{ color: perpsPulse.fundingZScore > 0 ? 'var(--accent-negative)' : perpsPulse.fundingZScore < 0 ? 'var(--accent-positive)' : 'var(--text-secondary)' }"
                                 style="font-size: 12px; font-weight: 700;">
                                {{ perpsPulse.fundingZScore > 0 ? '+' : '' }}{{ perpsPulse.fundingZScore.toFixed(2) }}σ
                            </div>
                        </div>
                        <!-- L/S Entropy (Health Indicator) -->
                        <div style="background: rgba(0,0,0,0.1); padding: 6px 8px; border-radius: 4px; display: flex; align-items: center; justify-content: space-between;">
                            <div style="font-size: 9px; color: var(--text-secondary); text-transform: uppercase;">L/S Health</div>
                            <div :style="{ color: perpsPulse.lsEntropy >= 0.7 ? 'var(--accent-positive)' : perpsPulse.lsEntropy < 0.4 ? 'var(--accent-negative)' : 'var(--text-secondary)' }"
                                 style="font-size: 12px; font-weight: 700;">
                                {{ (perpsPulse.lsEntropy * 100).toFixed(0) }}%
                            </div>
                        </div>
                    </div>

                    <!-- Row 4: Active Signals (NEW) -->
                    <div v-if="perpsPulse.signalCount > 0" style="background: rgba(0,0,0,0.1); padding: 8px; border-radius: 6px;">
                        <div style="font-size: 9px; color: var(--text-secondary); text-transform: uppercase; margin-bottom: 6px; display: flex; align-items: center; gap: 4px;">
                            <i data-lucide="activity" style="width: 10px; height: 10px;"></i>
                            Active Signals
                        </div>
                        <div style="display: flex; flex-wrap: wrap; gap: 4px;">
                            <div v-for="signal in perpsPulse.signals"
                                 :key="signal.signal_type"
                                 :class="['signal-pill', signal.direction, signal.strength]"
                                 :title="signal.description + ' (confidence: ' + (signal.confidence * 100).toFixed(0) + '%)'">
                                <span class="signal-icon">
                                    <i :data-lucide="getSignalIcon(signal.signal_type)" style="width: 9px; height: 9px;"></i>
                                </span>
                                <span class="signal-label">{{ formatSignalType(signal.signal_type) }}</span>
                                <span class="signal-strength">{{ signal.strength.charAt(0).toUpperCase() }}</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp } = Vue;

        createApp({
            data() {
                return {
                    perpsPulse: {
                        fundingRate: '0.010%',
                        fundingSentiment: 'NEUTRAL',
                        longPct: 52,
                        shortPct: 48,
                        lsLabel: 'BALANCED',
                        basisStatus: 'NEUTRAL',
                        basisPct: '+0.05%',
                        openInterest: '$2.4B',
                        volume: '$8.7B',
                        cexPct: 87,
                        exchangeCount: 12,
                        fundingZScore: 0.0,
                        lsEntropy: 0.68,
                        signalCount: 0,
                        signalSummary: {
                            bullish: 0,
                            bearish: 0,
                            total: 0
                        },
                        signals: []
                    }
                };
            },
            methods: {
                getSignalIcon(signalType) {
                    const iconMap = {
                        'funding_divergence': 'git-branch',
                        'ls_extreme': 'scale',
                        'liquidation_risk': 'alert-triangle',
                        'momentum': 'trending-up'
                    };
                    return iconMap[signalType] || 'activity';
                },

                formatSignalType(signalType) {
                    return signalType.replace(/_/g, ' ');
                },

                loadScenario(scenario) {
                    const scenarios = {
                        neutral: {
                            fundingRate: '0.010%',
                            fundingSentiment: 'NEUTRAL',
                            longPct: 52,
                            shortPct: 48,
                            lsLabel: 'BALANCED',
                            basisStatus: 'NEUTRAL',
                            basisPct: '+0.05%',
                            openInterest: '$2.4B',
                            volume: '$8.7B',
                            cexPct: 87,
                            exchangeCount: 12,
                            fundingZScore: 0.15,
                            lsEntropy: 0.68,
                            signalCount: 0,
                            signalSummary: { bullish: 0, bearish: 0, total: 0 },
                            signals: []
                        },
                        bullish: {
                            fundingRate: '-0.025%',
                            fundingSentiment: 'BEARISH',
                            longPct: 65,
                            shortPct: 35,
                            lsLabel: 'LONG HEAVY',
                            basisStatus: 'PREMIUM',
                            basisPct: '+0.32%',
                            openInterest: '$3.1B',
                            volume: '$12.4B',
                            cexPct: 92,
                            exchangeCount: 14,
                            fundingZScore: -1.85,
                            lsEntropy: 0.51,
                            signalCount: 3,
                            signalSummary: { bullish: 3, bearish: 0, total: 3 },
                            signals: [
                                {
                                    signal_type: 'funding_divergence',
                                    direction: 'bullish',
                                    strength: 'strong',
                                    confidence: 0.84,
                                    description: 'Funding rate negative while price rising - contrarian bullish'
                                },
                                {
                                    signal_type: 'momentum',
                                    direction: 'bullish',
                                    strength: 'moderate',
                                    confidence: 0.72,
                                    description: 'Positive momentum with increasing OI'
                                },
                                {
                                    signal_type: 'ls_extreme',
                                    direction: 'bullish',
                                    strength: 'weak',
                                    confidence: 0.58,
                                    description: 'Long ratio elevated but not extreme'
                                }
                            ]
                        },
                        bearish: {
                            fundingRate: '0.095%',
                            fundingSentiment: 'BULLISH',
                            longPct: 72,
                            shortPct: 28,
                            lsLabel: 'LONG EXTREME',
                            basisStatus: 'PREMIUM',
                            basisPct: '+0.78%',
                            openInterest: '$2.9B',
                            volume: '$15.2B',
                            cexPct: 89,
                            exchangeCount: 13,
                            fundingZScore: 2.45,
                            lsEntropy: 0.38,
                            signalCount: 4,
                            signalSummary: { bullish: 0, bearish: 4, total: 4 },
                            signals: [
                                {
                                    signal_type: 'ls_extreme',
                                    direction: 'bearish',
                                    strength: 'extreme',
                                    confidence: 0.92,
                                    description: 'Long ratio dangerously high - liquidation cascade risk'
                                },
                                {
                                    signal_type: 'funding_divergence',
                                    direction: 'bearish',
                                    strength: 'strong',
                                    confidence: 0.88,
                                    description: 'Funding rate extremely positive - market overheated'
                                },
                                {
                                    signal_type: 'liquidation_risk',
                                    direction: 'bearish',
                                    strength: 'strong',
                                    confidence: 0.79,
                                    description: 'High liquidation cluster below current price'
                                },
                                {
                                    signal_type: 'momentum',
                                    direction: 'bearish',
                                    strength: 'moderate',
                                    confidence: 0.65,
                                    description: 'Momentum divergence detected'
                                }
                            ]
                        },
                        extreme: {
                            fundingRate: '0.150%',
                            fundingSentiment: 'EXTREME',
                            longPct: 81,
                            shortPct: 19,
                            lsLabel: 'CRITICAL',
                            basisStatus: 'PREMIUM',
                            basisPct: '+1.24%',
                            openInterest: '$3.8B',
                            volume: '$22.1B',
                            cexPct: 94,
                            exchangeCount: 15,
                            fundingZScore: 3.12,
                            lsEntropy: 0.22,
                            signalCount: 5,
                            signalSummary: { bullish: 1, bearish: 4, total: 5 },
                            signals: [
                                {
                                    signal_type: 'ls_extreme',
                                    direction: 'bearish',
                                    strength: 'extreme',
                                    confidence: 0.98,
                                    description: 'CRITICAL: Long ratio at extreme levels'
                                },
                                {
                                    signal_type: 'funding_divergence',
                                    direction: 'bearish',
                                    strength: 'extreme',
                                    confidence: 0.95,
                                    description: 'Funding rate at record highs'
                                },
                                {
                                    signal_type: 'liquidation_risk',
                                    direction: 'bearish',
                                    strength: 'extreme',
                                    confidence: 0.91,
                                    description: 'Massive liquidation cascade imminent'
                                },
                                {
                                    signal_type: 'momentum',
                                    direction: 'bearish',
                                    strength: 'strong',
                                    confidence: 0.82,
                                    description: 'Negative momentum divergence confirmed'
                                },
                                {
                                    signal_type: 'momentum',
                                    direction: 'bullish',
                                    strength: 'weak',
                                    confidence: 0.45,
                                    description: 'Short-term bounce potential from extreme conditions'
                                }
                            ]
                        }
                    };

                    if (scenarios[scenario]) {
                        this.perpsPulse = { ...scenarios[scenario] };

                        // Re-initialize Lucide icons after DOM update
                        this.$nextTick(() => {
                            lucide.createIcons();
                        });
                    }
                }
            },
            computed: {
                lsBarClass() {
                    const longPct = parseFloat(this.perpsPulse.longPct);
                    const shortPct = parseFloat(this.perpsPulse.shortPct);

                    if (longPct >= 70) return 'extreme-long';
                    if (shortPct >= 70) return 'extreme-short';
                    if (longPct >= 65) return 'high-long';
                    if (shortPct >= 65) return 'high-short';
                    if (longPct >= 55) return 'moderate-long';
                    if (shortPct >= 55) return 'moderate-short';
                    return 'balanced';
                },

                lsLabelClass() {
                    const longPct = parseFloat(this.perpsPulse.longPct);
                    const shortPct = parseFloat(this.perpsPulse.shortPct);

                    if (longPct >= 70) return 'extreme-warning';
                    if (shortPct >= 70) return 'extreme-warning short';
                    return '';
                }
            },

            mounted() {
                lucide.createIcons();
            },
            updated() {
                lucide.createIcons();
            }
        }).mount('#app');
    </script>
</body>
</html>
